# 图片生成 API 完整使用指南

## 📋 概述

本应用已完整集成火山引擎 **Seedream 4.0** 图片生成 API，支持以下功能：

- ✅ **文生图**：根据文本描述生成图片
- ✅ **图生图**：基于参考图片和文本生成新图片
- ✅ **多图融合**：使用 2-10 张参考图生成融合后的图片
- ✅ **组图生成**：一次生成多张相关联的图片（最多15张）
- ✅ **流式输出**：实时查看图片生成进度

## 🎯 支持的模型

### 1. Seedream 4.0 (推荐) ⭐
- **模型ID**: `doubao-seedream-4-0-250828`
- **功能**: 文生图、单图生图、多图生图、组图生成
- **特点**: 功能最全面，支持最多10张参考图

### 2. Seedream 3.0 T2I
- **模型ID**: `doubao-seedream-3-0-t2i`
- **功能**: 文生图专用
- **特点**: 文本生成图片，不支持图片输入

### 3. SeedEdit 3.0 I2I
- **模型ID**: `doubao-seededit-3-0-i2i`
- **功能**: 图生图专用
- **特点**: 仅支持单张参考图

## 🚀 功能使用说明

### 一、文生图（Text-to-Image）

**适用模型**: 所有模型

**使用步骤**:
1. 在"模型选择"中选择任一模型
2. 在"提示词输入"框输入图片描述
3. 选择图片尺寸（1K、2K、4K或自定义宽高）
4. 点击"生成图片"

**提示词示例**:
```
一只可爱的小猫咪，坐在窗台上，阳光透过窗户洒在它身上，温馨治愈的画面，高清摄影
```

**注意事项**:
- 建议不超过300个汉字或600个英文单词
- 描述要具体详细，包含风格、场景、光线等元素
- 字数过多可能导致模型忽略部分细节

### 二、图生图（Image-to-Image）

**适用模型**: Seedream 4.0、SeedEdit 3.0 I2I

**使用步骤**:
1. 选择支持图生图的模型
2. 启用"图片输入"开关
3. 选择输入方式:
   - **上传本地图片**: 点击"选择文件"上传图片
   - **使用图片URL**: 输入可访问的图片链接
4. 输入文本提示词（可选但建议填写）
5. 调整其他参数后点击"生成图片"

**图片要求**:
- **格式**: JPEG、PNG
- **大小**: 不超过 10MB
- **分辨率**: 宽高 > 14px，总像素不超过 6000×6000
- **宽高比**: 1/3 到 3 之间

**使用示例**:
- 上传一张人物照片，提示词："将照片转换为油画风格"
- 上传一张风景照，提示词："改为夜晚场景，星空璀璨"

### 三、多图融合（Multi-Image Fusion）

**适用模型**: 仅 Seedream 4.0

**使用步骤**:
1. 选择 Seedream 4.0 模型
2. 启用"图片输入"开关
3. 上传 2-10 张图片，或输入多个图片URL（每行一个）
4. 输入融合提示词
5. 点击"生成图片"

**使用场景**:
- 风格融合：结合多张不同风格的图片
- 元素组合：将多张图片中的元素融合到一张图中
- 场景融合：融合多个场景特征

**示例提示词**:
```
融合这些图片的风格特点，创造一个统一协调的新场景，保留每张图片的主要元素
```

### 四、组图生成（Sequential Images）

**适用模型**: 仅 Seedream 4.0

**使用步骤**:
1. 选择 Seedream 4.0 模型
2. 在"组图功能"中选择"自动 (生成组图)"
3. 设置"最大图片数量"（1-15张）
4. 输入提示词
5. （可选）上传参考图片
6. 点击"生成图片"

**使用场景**:
- 故事分镜：生成一系列连续的故事画面
- 产品展示：生成同一产品的多角度展示图
- 设计方案：生成多个相关设计方案

**注意**:
- 如果使用参考图，`参考图数量 + 生成图片数量 ≤ 15`
- 实际生成数量由模型自动判断，可能少于设置的最大值

## ⚙️ 高级参数说明

### 1. 图片尺寸 (size)

**方式一：指定分辨率**
- `1K`、`2K`、`4K`
- 配合提示词中的宽高比描述，由模型判断最终尺寸

**方式二：指定精确尺寸**
- 格式：`宽x高`，如 `2048x2048`
- 总像素范围：`1280x720` 到 `4096x4096`
- 宽高比范围：`1/16` 到 `16`

**推荐尺寸**:
| 宽高比 | 推荐尺寸 | 适用场景 |
|--------|---------|---------|
| 1:1 | 2048x2048 | 社交媒体头像、图标 |
| 4:3 | 2304x1728 | 传统显示器、投影 |
| 3:4 | 1728x2304 | 手机竖屏、海报 |
| 16:9 | 2560x1440 | 视频封面、横屏展示 |
| 9:16 | 1440x2560 | 短视频、手机壁纸 |
| 21:9 | 3024x1296 | 超宽屏幕、电影画幅 |

### 2. 随机种子 (seed)

**仅适用**: Seedream 3.0 T2I、SeedEdit 3.0 I2I

- **默认值**: `-1` (随机)
- **取值范围**: -1 到 2147483647
- **作用**: 控制生成的随机性
- **用途**: 
  - 设置固定种子可生成相似结果（不保证完全一致）
  - 用于微调和对比测试

### 3. 文本权重 (guidance_scale)

**仅适用**: Seedream 3.0 T2I、SeedEdit 3.0 I2I

- **默认值**: 
  - Seedream 3.0 T2I: 2.5
  - SeedEdit 3.0 I2I: 5.5
- **取值范围**: 1 到 10
- **作用**: 控制生成图像与提示词的一致程度
- **建议**:
  - 值越大，与提示词越接近，但可能失去创造性
  - 值越小，模型自由度越大，但可能偏离提示词

### 4. 水印设置 (watermark)

- **默认值**: `true` (添加水印)
- **选项**:
  - ✅ 开启：在图片右下角添加"AI生成"水印
  - ⬜ 关闭：不添加水印

## 📊 返回结果说明

### 成功响应

```json
{
  "model": "doubao-seedream-4-0-250828",
  "created": 1757321139,
  "data": [
    {
      "url": "https://...",
      "size": "2048x2048"
    }
  ],
  "usage": {
    "generated_images": 1,
    "output_tokens": 16384,
    "total_tokens": 16384
  }
}
```

**字段说明**:
- `url`: 图片下载链接（24小时有效，请及时保存）
- `size`: 实际生成的图片尺寸
- `generated_images`: 成功生成的图片数量
- `output_tokens`: 消耗的token数量（按图片大小计费）

### 错误处理

**常见错误及解决方案**:

| 错误码 | 错误信息 | 解决方案 |
|--------|---------|---------|
| 401 | API Key无效 | 检查API Key是否正确 |
| 400 | 参数错误 | 检查请求参数是否符合规范 |
| 429 | 请求过于频繁 | 降低请求频率，稍后重试 |
| 500 | 服务器错误 | 稍后重试，持续出现请联系支持 |

## 💡 最佳实践

### 1. 提示词编写技巧

**基本结构**:
```
[主体描述] + [场景环境] + [风格特征] + [技术要求]
```

**示例**:
```
一位年轻女性站在法式咖啡馆前，温暖的午后阳光，复古胶片摄影风格，
柔和的色调，景深效果，专业摄影，8K高清
```

**进阶技巧**:
- 使用具体的艺术家名字：如"梵高风格"、"宫崎骏画风"
- 指定摄影参数：如"浅景深"、"长焦镜头"、"黄金时刻"
- 添加情绪词汇：如"温馨"、"神秘"、"震撼"
- 避免否定词：少用"不要"，多用"希望"

### 2. 图片处理建议

**图生图优化**:
- 参考图质量越高，生成效果越好
- 提示词要与参考图相关，避免冲突
- 可以多次尝试不同的文本权重

**多图融合技巧**:
- 选择风格相近的图片融合效果更好
- 2-4张图片最容易控制
- 提示词要明确融合方向

### 3. 参数调优

**追求质量**:
- 尺寸：选择 2K 或更高
- 文本权重：适中值（2-5）
- 组图：关闭，专注单图质量

**追求创意**:
- 文本权重：较低值（1-3）
- 组图：开启，获得多个方案
- 种子：使用随机值

**批量生成**:
- 组图功能：开启自动模式
- 最大数量：设置为 10-15
- 提示词：通用化描述

## 🔧 故障排除

### CORS 跨域问题

**现象**: 浏览器提示跨域错误

**解决方案**:
1. **推荐**: 使用 Electron 桌面应用（无 CORS 限制）
   ```bash
   npm run app
   ```

2. 或在 Chrome 浏览器中禁用安全检查:
   ```bash
   # macOS/Linux
   open -na "Google Chrome" --args --disable-web-security --user-data-dir=/tmp/chrome_dev
   
   # Windows
   chrome.exe --disable-web-security --user-data-dir=C:\tmp\chrome_dev
   ```

### 图片无法加载

**原因**: 
- 图片链接已过期（24小时有效期）
- 网络问题

**解决方案**:
- 生成后立即下载保存
- 检查网络连接

### 生成失败

**常见原因**:
1. **提示词违规**: 避免敏感、暴力、成人内容
2. **参考图不符合要求**: 检查格式、大小、宽高比
3. **API配额不足**: 检查账户余额
4. **参数冲突**: 如 SeedEdit 3.0 使用了多张图片

## 📞 获取帮助

- **文档**: 查看项目 README.md
- **API文档**: [火山引擎官方文档](https://www.volcengine.com/docs/82379/1298454)
- **控制台**: [火山方舟控制台](https://console.volcengine.com/ark)

## 🎉 快速上手

1. **首次使用**:
   ```bash
   # 安装依赖
   npm install
   
   # 启动应用
   npm run app  # Electron 桌面版
   # 或
   npm start    # 浏览器版
   ```

2. **配置 API Key**:
   - 进入"设置"页面
   - 输入火山引擎 ARK API Key
   - 点击"测试连接"验证

3. **开始创作**:
   - 进入"图片生成"页面
   - 输入提示词或上传图片
   - 点击"生成图片"
   - 预览和下载结果

## 🌟 示例场景

### 场景1: 产品设计图

```
提示词: 一款极简主义智能手表，黑色金属表身，圆形表盘，
        OLED屏幕，产品摄影，白色背景，专业光影，8K渲染

模型: Seedream 4.0
尺寸: 2048x2048
组图: 开启，生成5张不同角度
```

### 场景2: 角色插画

```
提示词: 一位可爱的动漫风格少女，粉色短发，大眼睛，微笑，
        吉卜力工作室画风，温暖柔和的色彩，手绘质感

模型: Seedream 4.0
尺寸: 1728x2304 (3:4竖版)
```

### 场景3: 风格迁移

```
参考图: 上传一张街景照片
提示词: 将这张照片转换为莫奈印象派画作风格，
        保留原有的构图和建筑，但使用印象派的笔触和色彩

模型: SeedEdit 3.0 I2I
文本权重: 6.0
```

---

**享受 AI 创作的乐趣！** 🎨✨


